<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>lib_opcode function library</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../doc/files/g3readme_cam_022916_dwedit.css" type="text/css" />
<link href="../../doc/files/g3icon.ico" rel="icon" type="image/bmp" />
</head>
<body>
<div id="container">
<div class="ribbon_bubble">
    <div class="ribbon_rectangle">
<h1>lib_opcode function library</h1>
</div>
    <div class="ribbon_triangle-l"></div>
    <div class="ribbon_triangle-r"></div>

<div class="section">
<p><strong>Dependencies:</strong> alter_effect</p>
</div>

<div class="ribbon_rectangle_h2"><h2>Description</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p>
Functions here are associated with the association of opcodes to various secondary effects, and the extraction of those opcodes and secondary effects into subspells. At the moment we are trying to avoid dependencies here so the library can be self-contained.</p>
</div>

<div class="ribbon_rectangle_h2"><h2>Functions</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p><strong>opcode_extract(opcode:i="-1", header:i="-1", saves:b, probs:b, include_primary:b, sectype:i, file:s, eff:s)=(subspell:s)</strong> action<br></p><p>
	Given 'file', which should be an item or spell, and 'opcode', we extract the any associated effects from file and cast them as a subspell. If header is set to a nonnegative number, we do this only for that header (header is required for item files). Returns the resref of the subspell.</p>
	<p>By default, the saving throws/MR checks and probabilities are checked when the subspell is called. Set saves=1 and probs=1 to keep those checks with the individual effects in the subspell.</p>
	<p>Also by default, the opcode itself is not extracted. Set include_primary=1 to extract it.</p>
	<p>If you set sectype to a positive number, the subspell receives that sectype. (Otherwise it has sectype 0).</p>
<p><strong>opcode_load_data</strong> action_macro<br></p><p>
	Load the library data used by lib_opcode functions. The default assumption is that the data is in MOD_FOLDER/sfo/data, but you can override by setting sfo_opcode_data_path to the (full) path to the data. Returns sfo_opcode_data_loaded=1.</p><p></p>
<p><strong>opcode_secondary_effects(primary_opcode:i="-1", fx_off:i, include_all_cosmetics:b, include_primary:b, parent_resource:s="lib_opcode")=(value:s, opcode:s)</strong> patch<br></p><p>
	Given the offset of an fx block, and a primary opcode, returns 1 if the opcode of the block is associated with the primary opcode (that is: it is an appropriate icon or other cosmetic 
	effect, or else is a reliably-associated secondary effect). If include_primary is set to 1 (default=0) return the primary opcode itself here. If include_all_cosmetics is set to 1 (default=0), 
	returns true for any cosmetic effect (except icons and strrefs, which always get checked).</p>
	<p>For convenience, we also return the opcode itself (as 'opcode').</p>
	<p>parent_resource should be set to the file in which the block is assumed to be (defaults to SOURCE_RES)</p><p></p>



</div>
<div class="ribbon_rectangle_h2"><h2>Internal functions</h2> </div>
<div class="ribbon_triangle_h2-l"></div>
<div class="ribbon_triangle_h2-r"></div>
<div class="section">
<p>These should not be called from outside the library itself.</p>
<p><strong>opcode_load_data(data_path:s="MOD_FOLDER/sfo/data")=(opcode_strrefs:a, opcode_glows:a, opcode_icons:a, opcode_animations:a, opcode_sparkles:a, opcode_eff_arr:a)</strong> action<br></p><p>
	Load the library data used by lib_opcode functions. The default assumption is that the data is in MOD_FOLDER/sfo/data, but you can override by setting sfo_opcode_data_path to the (full) path to the data. Returns sfo_opcode_data_loaded=1.</p><p></p>





</div>



</div>
</div>
</body>