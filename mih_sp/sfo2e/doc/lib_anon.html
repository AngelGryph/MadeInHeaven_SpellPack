<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>lib_anon function library</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../doc/files/g3readme_cam_022916_dwedit.css" type="text/css" />
<link href="../../doc/files/g3icon.ico" rel="icon" type="image/bmp" />
</head>
<body>
<div id="container">
<div class="ribbon_bubble">
    <div class="ribbon_rectangle">
<h1>lib_anon function library</h1>
</div>
    <div class="ribbon_triangle-l"></div>
    <div class="ribbon_triangle-r"></div>

<div class="section">
<p><strong>Dependencies:</strong> lib_fn, lib_sugar, lib_tools</p>
</div>

<div class="ribbon_rectangle_h2"><h2>Description</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p></p><p>The anonymous function construct. Functions here should build and apply anonymous functions, and not interact with IE resources.</p><p>Functions here should start with 'anon_'.</p><p></p>
</div>

<div class="ribbon_rectangle_h2"><h2>Functions</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p><strong>anon_check(has_output:i, function:s, input:s=arguments, output:s=value, prepend:s, append:s)=(function:s, SFO_anon_func_count:s)</strong> dimorphic<br></p><p>
Check if 'function' is an anonymous function definition, and if so create it and return its name; if not, return 'function' itself.</p><p>A string is an anonymous function definition if it contains any of these: [ <>/=+*{}].  (If you somehow manage to define an anonymous function that doesn't
use any of these, just add a space at the beginning.)</p><p></p>
<p><strong>anon_define(has_output:b, action_function:b, return_array:b, function:s, input:s=arguments, output:s=value, prepend:s, append:s)=(function:s, SFO_anon_func_count:s)</strong> dimorphic<br></p><p>Define the string 'function' as an anonymous patch function (setting its single STR_VAR input to 'input' and its single output to 'output'), and return the name of the function and an integer keeping track of how many anonymous functions have been defined.</p><p>The point of the integer is to avoid namespace collisions. By leaving it in scope for other calls of anon_define, we guarantee distinct functions.</p><p>We allow the following syntactic sugar for anon_define:</p><p>- '__' evaluates to '%input%'
- 'SFO_args' evaluates to 'input'
- '{' and '</p>
<p><strong>anon_eval(has_output:i, arguments:s, function:s, append:s, prepend:s)=(value:s)</strong> action<br><strong>anon_eval(has_output:i, arguments:s, function:s, append:s, prepend:s)=(value:s)</strong> patch<br></p><p>
Evaluate 'function' as an anonymous patch function, apply it to 'arguments', and return the result.
NB: anon_eval is not dimorphic. The action version runs on a blank patch. The patch version runs on whatever is
currently being patched.
</p>








</div>



</div>
</div>
</body>