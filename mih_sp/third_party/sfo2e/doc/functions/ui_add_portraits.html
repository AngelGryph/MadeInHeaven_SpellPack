<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>ui_add_portraits function library</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../doc/files/g3readme_cam_022916_dwedit.css" type="text/css" />
<link href="../../doc/files/g3icon.ico" rel="icon" type="image/bmp" />
</head>
<body>
<div id="container">
<div class="ribbon_bubble">
    <div class="ribbon_rectangle">
<h1>ui_add_portraits function library</h1>
</div>
    <div class="ribbon_triangle-l"></div>
    <div class="ribbon_triangle-r"></div>

<div class="section">
<p><strong>Dependencies:</strong> alter_effect, ds, lib_2da, lib_2daq, lib_anon, lib_array, lib_class, lib_cre, lib_data, lib_eff, lib_fn, lib_ids, lib_ietool, lib_ini, lib_kit, lib_script, lib_sfo, lib_spl, lib_splconv, lib_ssl, lib_struct, lib_sugar, lib_tools, lib_ui, lib_vtable, resolve_spell, ui_add_subraces, ui_bonus_spells, ui_deolvynize, ui_detect_class_kit, ui_dual_class_kits, ui_externalize_hlas, ui_externalize_proficiencies, ui_extra_spells, ui_on_open, ui_shared_code, ui_spell_system, ui_system_call, ui_virtual_class</p>
</div>

<div class="ribbon_rectangle_h2"><h2>Description</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p>This library contains a single function for adding new portraits into the game, including various forms of UI integration on EE games.</p>
</div>

<div class="ribbon_rectangle_h2"><h2>Public functions</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p><strong>color_finder_tool()=()</strong> action<br></p><p>
NOT FOR LIVE USE - alter the UI so that the CHARGEN color customization screen displays the numerical values of the chosen colors
</p>
<p><strong>ui_add_portraits(force_cd:i, portrait_path:s, portrait_table:s, disable:s, enable:s)=()</strong> action<br></p><p>Add some new portraits into the system, or modify existing ones (EE only)</p></p><p><p>The portraits should be listed in a 2DA table of form
<table>
<tr><td></td>  			<td>skin</td>	<td>hair</td>	<td>major</td>	<td>minor</td>	<td>race</td>	<td>sex</td>		<td>class</td>		<td>disabled</td></tr>
<td>EXAMPLE</td>	   <td>INT</td>		<td>INT</td>	<td>INT</td>	<td>INT</td>	<td>human</td>	<td>f</td>			<td>fighter</td>	<td>no</td></tr>
</table>
 (any of these columns can be missing, in which case defaults are assumed.) The function generates
a master table of this form which lives in the 'shared' subdirectory of weidu_external (specifically,
at weidu_external/data/shared/dw_portraits.2da)</p>
<p>
<ul>
<li>'skin', 'hair', 'major' and 'minor' are the colors - as used by the UI - that should be assigned by default if the portrait is selected. (You can edit these 
<li>'race' can be any of human, halfelf, elf, dwarf, halfling, gnome, halforc, special (the default).</li>
<li>'class' can be fighter, wizard, cleric, thief, bard, barbarian, special (the default).</li>
<li>'sex' can be f, m, fm (the default).</li>
<li>'disabled' can be yes or no (the default).</li>
</ul>
</p>
<p>The bmps themselves should be named as follows:
<ul>
<li>EXAMPLEhires.bmp (for large high-resolution portraits) - copied to the L slot</li>
<li>EXAMPLE330.bmp - also copied to the L slot</li>
<li>EXAMPLEL.bmp - copied direct to the L slot</li>
<li>EXAMPLE269.bmp - copied to the M slot</li>
<li>EXAMPLEM.bmp - copied to the M slot</li>
</ul>
<p>
<p>The function takes these variables:
<ul>
<li>portrait_table: the full path to a new table, of the above form, to be added
<li>portrait_path: the path to the directory containing any new portrait BMPs listed in the table (or, if no table is given, containing any 
<li>portrait BMPs just to be copied over directly - mostly applies to the core IWD/BG/BG2 portraits)
<li>disable: a list, separated by spaces, of portrait base names to disable from the system
<li>enable: a list, separated by spaces, of portrait base names to enable in the systems
</ul>
<p>On a non-EE install we default to CamDawg's cd_portrait_copy (which is assumed as a dependency); you can force this even on EE by setting INT_VAR force_cd=1.
</p>



</div>
<div class="ribbon_rectangle_h2"><h2>Internal functions</h2> </div>
<div class="ribbon_triangle_h2-l"></div>
<div class="ribbon_triangle_h2-r"></div>
<div class="section">
<p>These should not be called from outside the library itself.</p>
<p><strong>activate_portrait_coloring()=()</strong> action<br></p>
<p><strong>add_to_portrait_tables_helper(warn_of_repeats:i, to_read:s, to_add_to:s)=()</strong> action<br></p>
<p><strong>install_portraits(lua_loc:s="lua")=()</strong> action<br></p>
<p><strong>read_portrait_data()=(portrait_skin:a, portrait_hair:a, portrait_major:a, portrait_minor:a, portrait_sex:a, portrait_race:a, portrait_class:a)</strong> action<br></p>
<p><strong>sort_portrait_data(sex:s)=(sorted_array:a)</strong> action<br></p>





</div>



</div>
</div>
</body>