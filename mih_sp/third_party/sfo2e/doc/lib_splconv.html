<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>lib_splconv function library</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../doc/files/g3readme_cam_022916_dwedit.css" type="text/css" />
<link href="../../doc/files/g3icon.ico" rel="icon" type="image/bmp" />
</head>
<body>
<div id="container">
<div class="ribbon_bubble">
    <div class="ribbon_rectangle">
<h1>lib_splconv function library</h1>
</div>
    <div class="ribbon_triangle-l"></div>
    <div class="ribbon_triangle-r"></div>

<div class="section">
<p><strong>Dependencies:</strong> alter_effect, lib_tools, resolve_spell</p>
</div>

<div class="ribbon_rectangle_h2"><h2>Description</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p>Tools to convert wizard spells to priest spells or make innate versions of either. This library should have no dependencies.</p><p>Conventions:
- wizard spells have CT <=level
- innate spells have CT=1
 - wizard version of priest spell SPPRxyz has name DWPWxyz
 - priest version of wizard spell SPWIxyz has name DWWPxyz
 - innate version of wizard spell SPWIxyz has name DWWIxyz
 - innate version of priest spell SPPRxyz has name DWPIxyz
</p>
</div>

<div class="ribbon_rectangle_h2"><h2>Functions</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p><strong>splconv(spell:s, new_type:s, tra_path:s="MOD_FOLDER/lua/lang", tra:s="sfo_lua", new_resref:s)=(new_resref:s, splconv_array:a)</strong> dimorphic<br></p><p>
Input a wizard/priest spell 'spell' in the SPWI/SPPR range (either a resref, or an ids name (from normal or extended namespace), or an abbreviated ids name) and a spell type 'new_type' (innate/priest/wizard).
Convert the spell, unless old and new types match. Return the resref of the new spell. Delete any headers where min_level>50, to remove scroll-making code & the like.</p></p><p><p>If 'tra_path' and 'tra' are set ('tra' does not include the .tra extension) then the function attempts to load strings @100-@105 from it and then to update the description
to include new casting time, remove reference to spheres, and add a note saying that this is an innate version of a spell normally available to wizards (or whatever). See
lua/lang/english/sfo_lua.tra in the sfo-lua template for the format.</p><p><p>'splconv_array' is a 2D array reporting all spells/items that reference SPPR/SPWI spells (other than themselves) via 206/318/321/324. We output it to avoid
having to regenerate it each time.
</p>
<p><strong>splconv_array_load()=(splconv_array:a)</strong> dimorphic<br></p>
<p><strong>splconv_clone_or_cast(resref:s, new_resref:s)=()</strong> patch<br></p>
<p><strong>splconv_get_name(new_type:s, type:s, resref:s, spell:s)=(new_resref:s)</strong> dimorphic<br></p>
<p><strong>splconv_update_desc(new_ct:i, tra:s, tra_path:s, old_type:s, new_type:s, old_desc:s)=(new_desc:s)</strong> patch<br></p>








</div>



</div>
</div>
</body>