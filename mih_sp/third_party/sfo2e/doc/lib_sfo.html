<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>lib_sfo function library</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../doc/files/g3readme_cam_022916_dwedit.css" type="text/css" />
<link href="../../doc/files/g3icon.ico" rel="icon" type="image/bmp" />
</head>
<body>
<div id="container">
<div class="ribbon_bubble">
    <div class="ribbon_rectangle">
<h1>lib_sfo function library</h1>
</div>
    <div class="ribbon_triangle-l"></div>
    <div class="ribbon_triangle-r"></div>

<div class="section">
<p><strong>Dependencies:</strong> alter_effect, ds, lib_2da, lib_anon, lib_array, lib_fn, lib_ini, lib_struct, lib_sugar, lib_tools</p>
</div>

<div class="ribbon_rectangle_h2"><h2>Description</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">

</div>

<div class="ribbon_rectangle_h2"><h2>Functions</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p><strong>check_label(label:s, prefix:s)=(value:s)</strong> dimorphic<br></p><p>
Check for a marker file, which can be set by make_label.</p></p><p><p>Do not use make_label or check_label in your base tp2 to decide whether to install a component, as they are invisible to Project Infinity and the like.
</p>
<p><strong>log_this(repeat:b=1, new:b, file:s, input:s, arguments:s, path:s="weidu_external/data/MOD_FOLDER", location:s, locbase:s)=()</strong> dimorphic<br></p><p>
Dump the string 'input' (synonym:'arguments') into the text file 'file' (by default placed in the weidu_external/data/MOD_FOLDER directory, but you can override), creating it if necessary.</p><p>If repeat=0, only do this if it's not already there.
If new=1, wipe any existing contents
</p>
<p><strong>make_label(label:s)=()</strong> dimorphic<br></p><p>
Set a marker file, which can be checked by check_label. </p></p><p><p>Do not use make_label or check_label in your base tp2 to decide whether to install a component, as they are invisible to Project Infinity and the like.
</p>
<p><strong>regexp_warning(file:s, parent:s="<unknown>")=()</strong> dimorphic<br></p><p>
Special case of 'warning' used specifically as a soft-fail for regexps.
</p>
<p><strong>sfo_batch_set</strong> action_macro<br></p>
<p><strong>sfo_batch_update()=()</strong> action<br></p>
<p><strong>sfo_crossplatform</strong> action_macro<br></p><p>
Load appropriate values of the various variables for different versions of BG.
</p>
<p><strong>sfo_fix()=()</strong> action<br></p><p>
A few basic fixes:
<ul>
<li>make sure dir.ids is present and working
<li>add some possibly-missing entries to gtimes.ids and spell.ids
<li>remove + from missile.ids
<li>on BGEE, add some spell.ids entries missing that are present on SoD
</ul>
</p>
<p><strong>sfo_load(library:s)=()</strong> action<br></p><p>
Given a list of space-separated sfo library functions, load those functions and (recursively) any libraries they depend on.
</p>
<p><strong>sfo_path(path:s, location:s, locbase:s, file:s)=(file_path:s, path:s)</strong> dimorphic<br></p><p>
Given some or all of 'file', 'path', 'location' and 'locbase', return a full filespec file_path (e.g. MOD_FOLDER/lib/lib_soundset.tph) and the path bit (e.g. "MOD_FOLDER/lib).</p>
<p>
Determined as follows:
<ul>
<li>if 'path' is set, just use it.
<li>if not, and 'location' is set:
	<ul>
	<li>if 'locbase is set, use 'MOD_FOLDER/locbase/location'
	<li>if not, and the 'component_loc' variable is set, use 'MOD_FOLDER/component_loc/location'
	<li>otherwise, use 'MOD_FOLDER/location'
	</ul>
<li>if not, and 'locbase' is set, use 'MOD_FOLDER/locbase'
<li>otherwise, just use ""
	
</p>
<p><strong>sfo_setup</strong> action_macro<br></p><p>
Set up the SFO directories and variables.</p><p></p>
<p><strong>warning(repeat:i, warning:s, arguments:s)=()</strong> dimorphic<br></p><p>
Dump the string 'warning' (synonym: 'arguments') into data_loc/sfo_warnings.txt, prepended with the component number and mod name.
If repeat=0, only do this if it's not already there.
</p>








</div>



</div>
</div>
</body>